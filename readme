# Modbus TCP Proxy

## Overview

This repository contains a Python-based Modbus TCP Proxy script that acts as a bridge between multiple clients and a single Modbus TCP server. It serializes requests to avoid cross-messaging and ensures smooth communication.

---

## Features

- **Configuration via `config.yaml`**
- **Handles multiple clients with serialized requests**
- **Adjustable server settings** (timeouts and delays)
- **Built-in threading** for efficient request processing
- **Optional logging support** for detailed monitoring

---

## Prerequisites

Ensure the following are installed on your Debian system:

- **Python 3.8** or newer
- **`pip`** package manager
- **`virtualenv`** (optional but recommended for isolated environments)

---

## Installation Guide

### Clone the Repository

```bash
git clone https://github.com/Xerolux/Modbus-Tcp-Proxy.git /opt/Modbus-Tcp-Proxy
cd /opt/Modbus-Tcp-Proxy
```

### Create and Activate a Virtual Environment (Optional)

```bash
python3 -m venv venv
source venv/bin/activate
```

### Install Python Dependencies

```bash
pip install -r requirements.txt
```

### Set Up the Configuration File

1. Copy the example configuration file:
   ```bash
   cp config.example.yaml config.yaml
   ```
2. Edit `config.yaml` to match your setup:
   ```yaml
   Proxy:
     ServerHost: 0.0.0.0
     ServerPort: 502

   ModbusServer:
     ModbusServerHost: 192.168.1.100
     ModbusServerPort: 502
     ConnectionTimeout: 10
     DelayAfterConnection: 0.5

   Logging:
     Enable: true
     LogFile: /var/log/modbus_proxy.log
     LogLevel: INFO
   ```

### Run the Proxy Script

```bash
python modbus_tcp_proxy.py
```

---

## Installation Script Usage

1. Make the script executable:
   ```bash
   chmod +x install.sh
   ```
2. Run the script:
   ```bash
   ./install.sh
   ```

---

## Repository Structure

- **`modbus_tcp_proxy.py`**: Main script for the Modbus TCP Proxy
- **`config.example.yaml`**: Example configuration file
- **`requirements.txt`**: Python dependencies
- **`install.sh`**: Automated installation script (if created)
- **`modbus_proxy.service`**: Example systemd service file (created during installation)

---

## Additional Notes

- Ensure the Modbus server is reachable from the machine running this proxy.
- The `config.yaml` file must be present in the same directory as `modbus_tcp_proxy.py`.
- Logs are printed to the console by default. For production, enable logging in the `config.yaml` file.
- The repository is installed in `/opt/Modbus-Tcp-Proxy` for consistency.

---

## Contribution

For issues or suggestions, feel free to:

- Open an [Issue](https://github.com/Xerolux/Modbus-Tcp-Proxy/issues)
- Create a Pull Request (PR)

---

## License

This project is licensed under the **MIT License**. See the `LICENSE` file for more details.
