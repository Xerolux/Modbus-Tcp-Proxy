# Modbus TCP Proxy

## Übersicht
Dieses Projekt bietet einen Modbus-TCP-Proxy-Service, der es ermöglicht, Modbus-Kommunikation über TCP zu verwalten. Es unterstützt die dynamische Konfiguration und ist kompatibel mit Debian 12 und Ubuntu 24.

## Features
- Unterstützt Modbus-TCP-Kommunikation.
- Dynamische Konfigurationsverwaltung.
- Automatische Updates über Git.
- Unterstützung für Systemd-Services.

## Systemanforderungen
- Betriebssystem: Debian 12 oder Ubuntu 24
- Python: Version 3.7 oder neuer

## Installation
### 1. Voraussetzungen installieren
Führe die folgenden Befehle aus, um die benötigten Pakete zu installieren:
```bash
sudo apt update
sudo apt install -y python3 python3-pip python3-venv git bc
```

### 2. Repository klonen
Klonen des Git-Repositorys in das Verzeichnis `/opt/Modbus-Tcp-Proxy`:
```bash
git clone https://github.com/Xerolux/Modbus-Tcp-Proxy.git /opt/Modbus-Tcp-Proxy
```

### 3. Installationsskript ausführen
Führe das Installationsskript aus:
```bash
bash /opt/Modbus-Tcp-Proxy/install.sh
```
Das Skript installiert Abhängigkeiten, erstellt eine virtuelle Umgebung und richtet den Systemd-Service ein.

## Konfiguration
Die Konfiguration befindet sich in der Datei `config.yaml` im Verzeichnis `/opt/Modbus-Tcp-Proxy`.

### Beispiel-Konfiguration
```yaml
version: 0.0.4
Proxy:
  ServerHost: 0.0.0.0
  ServerPort: 5020
ModbusServer:
  ModbusServerHost: 192.168.178.196
  ModbusServerPort: 5020
  ConnectionTimeout: 10
  DelayAfterConnection: 0.5
Logging:
  Enable: true
  LogFile: /var/log/modbus_proxy.log
  LogLevel: INFO
```

- **Proxy.ServerHost**: Die Adresse, an die der Proxy gebunden wird.
- **Proxy.ServerPort**: Der Port, auf dem der Proxy lauscht.
- **ModbusServer.ModbusServerHost**: Die Zieladresse des Modbus-Servers.
- **ModbusServer.ModbusServerPort**: Der Zielport des Modbus-Servers.
- **Logging.LogFile**: Der Pfad zur Log-Datei.

## Nutzung
### Service starten
Nach der Installation wird der Systemd-Service automatisch gestartet. Um ihn manuell zu steuern:

Service starten:
```bash
sudo systemctl start modbus_proxy.service
```

Service stoppen:
```bash
sudo systemctl stop modbus_proxy.service
```

Service-Status überprüfen:
```bash
sudo systemctl status modbus_proxy.service
```

### Logs anzeigen
Die Logs befinden sich standardmäßig unter `/var/log/modbus_proxy.log`.

## Update
Das Installationsskript prüft automatisch auf Updates im Git-Repository und wendet diese an. Führe einfach das Installationsskript erneut aus:
```bash
bash /opt/Modbus-Tcp-Proxy/install.sh
```

## Lizenz
Dieses Projekt ist unter der **MIT License** lizenziert. Weitere Informationen findest du in der Datei [`LICENSE`](LICENSE).

## Support
Bei Fragen oder Problemen wende dich bitte über die Issues-Seite des Repositorys an uns.

